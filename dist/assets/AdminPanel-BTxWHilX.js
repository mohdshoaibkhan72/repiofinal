import{c as n,r as l,f as R,e as i,j as e}from"./index-CnEoQ-RF.js";import{L as I}from"./loader-2-TDvJkV4M.js";import{L as j}from"./layout-dashboard-BaKBjl_1.js";import{U as N}from"./users-Cr1EOpWS.js";import{a as v,M as w,P as h}from"./phone-D3KFPLOM.js";import{I as _,X as D}from"./x-circle-D1vuvrRO.js";import{F as P}from"./file-text-BhZP_NRh.js";import{M as q}from"./map-pin-BC_cr726.js";import{B as F}from"./briefcase-CnkfVIOB.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=n("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=n("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=n("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=n("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=n("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=n("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Y=()=>{const[u,A]=l.useState([]),[b,z]=l.useState([]),[y,C]=l.useState([]),[M,L]=l.useState(!0),[a,d]=l.useState("applications"),o=R();l.useEffect(()=>{localStorage.getItem("isAdminAuthenticated")!=="true"?o("/admin"):c()},[o]);const c=async()=>{try{const[s,t,r]=await Promise.all([i.applications.getAll(),i.partners.getAll(),i.contacts.getAll()]);A(s),z(t),C(r)}catch(s){console.error("Failed to fetch data",s)}finally{L(!1)}},x=async(s,t)=>{try{await i.applications.updateStatus(s,t),c()}catch(r){console.error("Failed to update status",r)}},f=async(s,t)=>{try{await i.contacts.updateStatus(s,t),c()}catch(r){console.error("Failed to update contact status",r)}},S=async s=>{if(window.confirm("Are you sure you want to delete this application?"))try{await i.applications.delete(s),c()}catch(t){console.error("Failed to delete application",t)}};if(M)return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gray-50",children:[e.jsx(I,{className:"w-12 h-12 text-rupivo-blue animate-spin mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"Loading Dashboard..."})]});const m=({id:s,icon:t,label:r})=>e.jsxs("button",{onClick:()=>d(s),className:`w-full flex items-center gap-3 px-6 py-4 transition-all duration-200 border-l-4 ${a===s?"bg-blue-50 border-rupivo-blue text-rupivo-blue font-bold shadow-sm":"border-transparent text-gray-500 hover:bg-gray-50 hover:text-gray-900 font-medium"}`,children:[e.jsx(t,{size:20}),e.jsx("span",{children:r})]}),g=({message:s})=>e.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center bg-white rounded-2xl border border-gray-100 shadow-sm col-span-full",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center mb-4",children:e.jsx(T,{className:"w-10 h-10 text-gray-300"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:"No Data Found"}),e.jsx("p",{className:"text-gray-500",children:s})]}),p=s=>new Date(s).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs("div",{className:"min-h-screen bg-gray-100 flex font-sans",children:[e.jsxs("aside",{className:"fixed left-0 top-0 h-full w-72 bg-white border-r border-gray-200 z-50 flex flex-col shadow-sm hidden lg:flex",children:[e.jsxs("div",{className:"p-8 border-b border-gray-100",children:[e.jsxs("h1",{className:"text-2xl font-extrabold text-rupivo-dark",children:["Rupivo",e.jsx("span",{className:"text-rupivo-blue",children:"."})]}),e.jsx("p",{className:"text-xs text-gray-400 font-bold tracking-widest uppercase mt-1",children:"Admin Panel"})]}),e.jsxs("nav",{className:"flex-1 py-6 space-y-1",children:[e.jsx(m,{id:"applications",icon:j,label:"Loan Applications"}),e.jsx(m,{id:"partners",icon:N,label:"Partners"}),e.jsx(m,{id:"contacts",icon:v,label:"Inquiries"})]}),e.jsx("div",{className:"p-6 border-t border-gray-100",children:e.jsxs("button",{onClick:()=>{localStorage.removeItem("isAdminAuthenticated"),o("/admin")},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-red-50 text-red-600 rounded-xl hover:bg-red-100 transition-colors font-bold",children:[e.jsx(E,{size:18}),"Logout"]})})]}),e.jsxs("div",{className:"lg:hidden fixed top-0 w-full bg-white border-b border-gray-200 z-50 px-4 py-3 flex justify-between items-center shadow-sm",children:[e.jsx("h1",{className:"text-xl font-extrabold text-rupivo-dark",children:"Rupivo Admin"}),e.jsx("button",{onClick:()=>{localStorage.removeItem("isAdminAuthenticated"),o("/admin")},className:"text-red-600 font-medium text-sm",children:"Logout"})]}),e.jsxs("div",{className:"lg:hidden fixed bottom-0 w-full bg-white border-t border-gray-200 z-50 flex justify-around py-3 shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.05)]",children:[e.jsxs("button",{onClick:()=>d("applications"),className:`flex flex-col items-center ${a==="applications"?"text-rupivo-blue":"text-gray-400"}`,children:[e.jsx(j,{size:20}),e.jsx("span",{className:"text-[10px] mt-1 font-bold",children:"Applications"})]}),e.jsxs("button",{onClick:()=>d("partners"),className:`flex flex-col items-center ${a==="partners"?"text-rupivo-blue":"text-gray-400"}`,children:[e.jsx(N,{size:20}),e.jsx("span",{className:"text-[10px] mt-1 font-bold",children:"Partners"})]}),e.jsxs("button",{onClick:()=>d("contacts"),className:`flex flex-col items-center ${a==="contacts"?"text-rupivo-blue":"text-gray-400"}`,children:[e.jsx(v,{size:20}),e.jsx("span",{className:"text-[10px] mt-1 font-bold",children:"Inquiries"})]})]}),e.jsx("main",{className:"flex-1 lg:pl-72 pt-16 lg:pt-0 pb-20 lg:pb-0",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-8 py-10",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-gray-900",children:[a==="applications"&&"Loan Applications",a==="partners"&&"Partner Registrations",a==="contacts"&&"Contact Inquiries"]}),e.jsx("p",{className:"text-gray-500 mt-1",children:"Manage and view all incoming requests from the website."})]}),a==="applications"&&e.jsx("div",{className:"space-y-4",children:u.length===0?e.jsx(g,{message:"No loan applications have been submitted yet."}):u.map(s=>{var t;return e.jsx("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between items-start gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:s.fullName}),e.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full uppercase tracking-wider
                                                        ${s.status==="approved"?"bg-green-100 text-green-700":s.status==="rejected"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:s.status})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-2 mt-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 gap-2",children:[e.jsx(w,{size:16,className:"text-gray-400"})," ",s.email]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 gap-2",children:[e.jsx(h,{size:16,className:"text-gray-400"})," ",s.phone]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 gap-2",children:[e.jsx(_,{size:16,className:"text-gray-400"})," ",e.jsx("strong",{children:(s.loanAmount||0).toLocaleString()})," (Min)"]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 gap-2",children:[e.jsx(k,{size:16,className:"text-gray-400"})," ",p(s.createdAt)]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm text-gray-700 bg-blue-50 px-3 py-2 rounded-lg w-fit",children:[e.jsx("span",{className:"font-bold text-rupivo-blue tracking-wide",children:"Selected Range:"}),e.jsx("span",{children:((t=(s.purpose||"").match(/Loan Range: (.*)/))==null?void 0:t[1])||"N/A"})]}),e.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-xl border border-gray-100",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(P,{size:16,className:"text-gray-400 mt-1 shrink-0"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:"Details"}),e.jsx("p",{className:"text-gray-700 text-sm mt-1",children:(s.purpose||"").replace(/, Loan Range: .*/,"")||"No details specified."})]})]})})]}),e.jsxs("div",{className:"flex flex-row lg:flex-col gap-3 w-full lg:w-auto mt-4 lg:mt-0 pt-4 lg:pt-0 border-t lg:border-t-0 border-gray-100",children:[s.status==="pending"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>x(s._id,"approved"),className:"flex-1 lg:flex-none flex items-center justify-center gap-2 px-5 py-2.5 bg-green-600 text-white rounded-xl text-sm font-bold hover:bg-green-700 transition-colors shadow-sm",children:[e.jsx($,{size:16})," Approve"]}),e.jsxs("button",{onClick:()=>x(s._id,"rejected"),className:"flex-1 lg:flex-none flex items-center justify-center gap-2 px-5 py-2.5 bg-red-white border border-red-200 text-red-600 rounded-xl text-sm font-bold hover:bg-red-50 transition-colors",children:[e.jsx(D,{size:16})," Reject"]})]}):e.jsxs("button",{onClick:()=>x(s._id,"pending"),className:"flex-1 lg:flex-none flex items-center justify-center gap-2 px-5 py-2.5 bg-gray-100 text-gray-600 rounded-xl text-sm font-bold hover:bg-gray-200 transition-colors",children:[e.jsx(V,{size:16})," Reset"]}),e.jsxs("button",{onClick:()=>S(s._id),className:"flex-1 lg:flex-none flex items-center justify-center gap-2 px-5 py-2.5 bg-white border border-gray-200 text-gray-400 rounded-xl text-sm font-bold hover:bg-red-50 hover:text-red-500 hover:border-red-100 transition-colors",children:[e.jsx(H,{size:16})," Delete"]})]})]})},s._id)})}),a==="partners"&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:b.length===0?e.jsx(g,{message:"No partners have registered yet."}):b.map(s=>e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-gray-100 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsxs("div",{className:"w-12 h-12 rounded-full bg-blue-50 flex items-center justify-center text-rupivo-blue font-bold text-xl",children:[s.firstName[0],s.lastName[0]]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900",children:[s.firstName," ",s.lastName]}),e.jsx("span",{className:"px-2 py-0.5 bg-blue-50 text-rupivo-blue text-[10px] font-bold uppercase tracking-widest rounded-md",children:"Partner"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 gap-3",children:[e.jsx(h,{size:16,className:"text-gray-400 shrink-0"})," ",s.mobile]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 gap-3",children:[e.jsx(q,{size:16,className:"text-gray-400 shrink-0"})," ",s.city]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 gap-3",children:[e.jsx(F,{size:16,className:"text-gray-400 shrink-0"})," ",s.profession]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-400 gap-3 pt-3 border-t border-gray-50",children:[e.jsx(k,{size:16,className:"text-gray-300 shrink-0"})," Joined ",p(s.createdAt)]})]})]},s._id))}),a==="contacts"&&e.jsx("div",{className:"space-y-4",children:y.length===0?e.jsx(g,{message:"No contact inquiries received."}):y.map(s=>e.jsx("div",{className:`rounded-2xl p-6 border shadow-sm transition-all ${s.status==="unread"?"bg-white border-blue-200 ring-1 ring-blue-50":"bg-gray-50 border-gray-100"}`,children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.name}),e.jsx("span",{className:`px-2 py-0.5 text-[10px] font-bold uppercase tracking-widest rounded-md
                                                        ${s.status==="unread"?"bg-blue-100 text-blue-700":s.status==="replied"?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,children:s.status})]}),e.jsxs("div",{className:"flex gap-4 text-sm text-gray-500 mb-4",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(w,{size:14})," ",s.email]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(h,{size:14})," ",s.phone]})]}),e.jsxs("p",{className:"text-gray-800 bg-white p-4 rounded-xl border border-gray-200 text-sm leading-relaxed",children:['"',s.message,'"']}),e.jsx("p",{className:"text-xs text-gray-400 mt-3 font-medium",children:p(s.createdAt)})]}),e.jsxs("div",{className:"flex gap-2",children:[s.status==="unread"&&e.jsx("button",{onClick:()=>f(s._id,"read"),className:"px-4 py-2 bg-white border border-gray-200 text-gray-600 rounded-lg text-xs font-bold hover:bg-gray-50 uppercase tracking-wider",children:"Mark Read"}),s.status!=="replied"&&e.jsx("button",{onClick:()=>f(s._id,"replied"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-xs font-bold hover:bg-blue-700 uppercase tracking-wider shadow-sm",children:"Mark Replied"})]})]})},s._id))})]})})]})};export{Y as AdminPanel};
